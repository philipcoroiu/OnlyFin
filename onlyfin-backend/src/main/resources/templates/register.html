<!DOCTYPE html>
<html lang="en">
<head>
    <title>Register Form</title>
</head>
<body>
<form id="registerForm">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email"><br><br>
    <label for="username">Username:</label>
    <input type="text" id="username" name="username"><br><br>
    <label for="password">Password:</label>
    <input type="password" id="password" name="password"><br><br>
    <input type="submit" value="Submit">
</form>

<script>
    document.getElementById("registerForm").addEventListener("submit", function(event) {
        event.preventDefault(); // prevent the form from submitting normally

        // get form data
        const form = document.getElementById("registerForm");
        const formData = new FormData(form);

        // convert form data to JSON object
        const jsonObject = {};
        formData.forEach(function(value, key) {
            jsonObject[key] = value;
        });

        // make AJAX request
        const xhr = new XMLHttpRequest();
        const url = "http://localhost:8080/register";
        xhr.open("POST", url, true);
        xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
        xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
                if (xhr.status === 200) {
                    // handle successful response
                    console.log(xhr.responseText);
                    window.location.href = "/user"; // redirect to "/user"
                } else {
                    // handle error response
                    console.log("Error: " + xhr.statusText);
                }
            }
        };
        xhr.send(JSON.stringify(jsonObject));
    });
</script>
</body>
</html>
